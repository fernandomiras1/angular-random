<app-navbar-web></app-navbar-web>

<div *ngIf="!error">

  <ng-container *ngIf="loading && loadingFeatured; then isLoading; else partialLoading"></ng-container>

  <ng-template #isLoading>
    <div class="spinner__container--initial" *ngIf="loading">
      <z-loading type="primary" size="large"></z-loading>
    </div>
  </ng-template>

  <ng-template #partialLoading>

    <app-filter-dialog *ngIf="openFilter" (close)="closeFilterDialog()" (filterApply)="onFilterApplied($event)"
      [categoriesFiltered]="categoriesFiltered" [provinceFiltered]="provinceFiltered"
      [localityFiltered]="localityFiltered" [commerceNameFiltered]="commerceNameFiltered">
    </app-filter-dialog>

    <div class="spinner__container--suggested" *ngIf="loading">
      <z-loading type="primary" size="large"></z-loading>
    </div>

    <div *ngIf="!loading" class="container">
      <div class="BussinesRulesDetail--container">

        <div class="padding-left-16">
          <p class="breadcrumb-text margin-top-32">Promociones > {{title}}</p>
          <div class="back margin-top-12">
            <p (click)="goBack()" class="z-highlight-2 subtitle" style="cursor: pointer">Volver</p>
          </div>
          <div class="counter margin-top-32">
            <p class="z-subtitle greet">{{totalPromotionsNumber}} promos en <strong class="strong">{{title}}</strong>
            </p>
          </div>
        </div>

        <div class="promotions--list margin-top-32">
          <div class="promotions--list__items" *ngFor="let promo of promosRendered; let i = index">
            <app-card-with-tag-web [promo]="promo" [index]="i"></app-card-with-tag-web>
          </div>
        </div>
        <div class="separator" *ngIf="promosRendered.length > 0"></div>

        <div class="row center-xs">
          <app-paginator [lastPageNumber]="this.lastPageNumber" [currentPageNumber]="currentPageNumber"
            (loadPageNumberRequested)="onLoadPageNumberRequested($event)"></app-paginator>
        </div>

        <div class="separator" *ngIf="promosRendered.length > 0"></div>
      </div>
    </div>
  </ng-template>
</div>
<ng-container *ngIf="!loading">
  <app-footer-ncom></app-footer-ncom>
</ng-container>
