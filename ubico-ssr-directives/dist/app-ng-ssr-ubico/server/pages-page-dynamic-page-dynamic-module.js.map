{"version":3,"sources":["./src/app/core/services/magnolia.service.ts","./src/app/shared/components/w2m-button/w2m-button.component.ts","./src/app/shared/components/w2m-button/w2m-button.component.html","./src/app/pages/page-dynamic/page-dynamic.module.ts","./src/app/shared/components/w2m-button/w2m-button.module.ts","./src/app/components/app-top-button/app-top-button.component.ts","./src/app/components/app-top-button/app-top-button.component.html","./src/app/shared/i18n/i18n.service.ts","./src/app/pages/page-dynamic/page-dynamic.routing.ts","./src/app/components/app-top-button/app-top-button.module.ts","./src/app/pages/page-dynamic/page-dynamic.component.ts"],"names":[],"mappings":"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","file":"pages-page-dynamic-page-dynamic-module.js","sourcesContent":["import { Injectable } from '@angular/core'\nimport { Observable } from 'rxjs'\nimport { CmsService } from 'src/app/shared/services/cms/cms.service'\nimport { environment } from '../../../environments/environment'\nimport { PageDynamic } from '../model/dynamic-page/dynamic-data-dto'\nimport { I18nService } from '../../shared/i18n/i18n.service'\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class MagnoliaService {\n  public PAGE_CURRENT: string\n\n  private readonly PROJECT = 'ubico'\n\n  private readonly URL_API = `${environment.URL_API}/cms/api/v1`\n\n  constructor(private cmsService: CmsService,\n    private i18nService: I18nService) {\n    this.cmsService.urlCms = this.URL_API\n  }\n\n  public getPage(page: string): Observable<PageDynamic> {\n    return this.cmsService\n      .get<PageDynamic>(`pages-endpoint/${this.PROJECT}/${page}`, { params: this.addParams })\n  }\n\n  get addParams() {\n    return {\n      locale: this.i18nService.currentLanguage,\n    }\n  }\n}\n","import {\n  Component, EventEmitter, Input, Output,\n} from '@angular/core'\nimport { ButtonDto } from './model/button-dto'\n\n@Component({\n  selector: 'w2m-button',\n  templateUrl: './w2m-button.component.html',\n  styleUrls: ['./w2m-button.component.scss'],\n})\nexport class W2mButtonComponent {\n  @Input() buttonData: ButtonDto\n\n  @Input() disabled = false\n\n  @Input() color = 'accent'\n\n  @Output() clicked: EventEmitter<void> = new EventEmitter()\n}\n","<w2m-link *ngIf=\"buttonData\" [urlLink]=\"buttonData.urlButton\">\n  <button [disabled]=\"disabled\" [color]=\"color\" (click)=\"clicked.emit($event)\">\n    <ng-content></ng-content>\n    <span *ngIf=\"buttonData.textButton\" class=\"w2m-button--text\">{{buttonData.textButton}}</span>\n  </button>\n</w2m-link>\n","import { NgModule } from '@angular/core'\nimport { CommonModule } from '@angular/common'\nimport { AppTopButtonModule } from 'src/app/components/app-top-button/app-top-button.module'\nimport { DirectivesModule } from '../../core/directives/directives.module'\n\nimport { PageDynamicComponent } from './page-dynamic.component'\nimport { PageDynamicRoutingModule } from './page-dynamic.routing'\n\n@NgModule({\n  declarations: [PageDynamicComponent],\n  imports: [\n    CommonModule,\n    DirectivesModule,\n    PageDynamicRoutingModule,\n    AppTopButtonModule,\n  ],\n})\n\nexport class PageDynamicModule {\n  static entry = PageDynamicComponent\n}\n","import { NgModule } from '@angular/core'\nimport { CommonModule } from '@angular/common'\nimport { W2mButtonComponent } from './w2m-button.component'\nimport { W2mLinkModule } from '../w2m-link/w2m-link.module'\n\n@NgModule({\n  declarations: [\n    W2mButtonComponent,\n  ],\n  imports: [\n    CommonModule,\n    W2mLinkModule,\n  ],\n  exports: [W2mButtonComponent],\n})\nexport class W2mButtonModule { }\n","import { isPlatformBrowser, ViewportScroller } from '@angular/common'\nimport {\n  Component, HostListener, Inject, PLATFORM_ID,\n} from '@angular/core'\nimport { ButtonDto } from 'src/app/shared/components/w2m-button/model/button-dto'\n\n@Component({\n  selector: 'app-top-button',\n  templateUrl: './app-top-button.component.html',\n  styleUrls: ['./app-top-button.component.scss'],\n})\nexport class AppTopButtonComponent {\n  public showButton=false\n\n  public buttonData: ButtonDto ={\n    textButton: '',\n  }\n\n  private readonly DEFAULT_HEIGHT_SCROLL=200\n\n  constructor(\n    @Inject(PLATFORM_ID) private platform: string,\n    private viewportScroller: ViewportScroller,\n  ) {}\n\n  @HostListener('window:scroll')\n  public scrolled(): void {\n    if (isPlatformBrowser(this.platform)) {\n      this.showButton = window.scrollY > this.DEFAULT_HEIGHT_SCROLL\n    }\n  }\n\n  public goToTop(): void{\n    this.viewportScroller.scrollToPosition([0, 0])\n  }\n}\n","<w2m-button class=\"app-top-button\"\n*ngIf=\"showButton\" (clicked)=\"goToTop()\"\n[buttonData]=\"buttonData\"><em class=\"fad fa-chevron-double-up\"></em>\n</w2m-button>\n","import {\n  Injectable, Optional, Inject, PLATFORM_ID,\n} from '@angular/core'\nimport { TranslateService } from '@ngx-translate/core'\nimport { REQUEST } from '@nguniversal/express-engine/tokens'\nimport { Request } from 'express'\nimport { isPlatformBrowser, DOCUMENT } from '@angular/common'\nimport { BehaviorSubject, Observable, of } from 'rxjs'\nimport { Language } from './model/language-dto'\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class I18nService {\n  public changeLanguage$: Observable<string>\n\n  public readonly defaultLanguage = 'es'\n\n  public readonly allowedLanguages: Language[] = [\n    {\n      code: 'en',\n      name: 'English',\n      startDate: 0,\n    },\n    {\n      code: 'es',\n      name: 'Español',\n      startDate: 1,\n    },\n  ]\n\n  private changeLanguageSubject: BehaviorSubject<string> = new BehaviorSubject<string>(this.defaultLanguage)\n\n  private currentLang: string\n\n  constructor(\n      private translate: TranslateService,\n      @Optional() @Inject(REQUEST) private req: Request,\n      @Inject(PLATFORM_ID) private platform: string,\n      @Inject(DOCUMENT) private document: Document,\n  ) {\n    this.currentLang = this.getLanguage()\n    this.changeLanguage$ = this.changeLanguageSubject.asObservable()\n  }\n\n  init(path: string): void {\n    this.translate.addLangs(this.allowedLanguages.map(lang => lang.code))\n    this.currentLanguage = this.processLanguage(path)\n    this.changeLanguageSubject.next(this.currentLanguage)\n    this.translate.use(this.processLanguage(path))\n    this.setLangHTML()\n  }\n\n  public find(): Observable<Language[]> {\n    return of(this.allowedLanguages)\n  }\n\n  public getURL(path: string) {\n    return path.replace(`/${this.processLanguage(path)}`, '')\n  }\n\n  public changeLanguage(selected: Language): void {\n    if (selected.code !== this.currentLanguage) {\n      this.currentLanguage = selected.code\n      this.translate.use(selected.code)\n      this.changeLanguageSubject.next(selected.code)\n      this.setLangHTML()\n    }\n  }\n\n  public getLanguage(): string {\n    return isPlatformBrowser(this.platform)\n      ? this.currentLanguage || this.defaultLanguage\n      : this.getLangFromSSR()\n  }\n\n  private getLangFromSSR() {\n    return this.req\n      ? this.extractLang(this.req.url)\n      : this.defaultLanguage\n  }\n\n  private processLanguage(path: string): string {\n    return this.allowedLanguages.some((lang: Language) => lang.code === this.extractLang(path))\n      ? this.extractLang(path)\n      : this.defaultLanguage\n  }\n\n  private extractLang(lang: string): string {\n    return lang.substring(1, 3)\n  }\n\n  private setLangHTML() {\n    this.document.documentElement.lang = this.currentLang\n  }\n\n  get currentLanguage(): string {\n    return this.currentLang\n  }\n\n  set currentLanguage(lng: string) {\n    this.currentLang = lng\n  }\n}\n","import { NgModule } from '@angular/core'\nimport { Routes, RouterModule } from '@angular/router'\nimport { PageDynamicComponent } from './page-dynamic.component'\n\nconst routes: Routes = [\n  {\n    path: '**',\n    component: PageDynamicComponent,\n  },\n]\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class PageDynamicRoutingModule {\n}\n","import { NgModule } from '@angular/core'\nimport { CommonModule } from '@angular/common'\nimport { W2mButtonModule } from '../../shared/components/w2m-button/w2m-button.module'\nimport { AppTopButtonComponent } from './app-top-button.component'\n\n@NgModule({\n  declarations: [AppTopButtonComponent],\n  imports: [\n    CommonModule,\n    W2mButtonModule,\n  ],\n  exports: [AppTopButtonComponent],\n})\nexport class AppTopButtonModule { }\n","import {\n  ChangeDetectorRef,\n  Component, OnDestroy, OnInit, ViewChild,\n} from '@angular/core'\nimport { Router } from '@angular/router'\nimport { takeUntil } from 'rxjs/operators'\nimport { Title } from '@angular/platform-browser'\nimport { MagnoliaService } from 'src/app/core/services/magnolia.service'\nimport { I18nService } from 'src/app/shared/i18n/i18n.service'\nimport { Subject } from 'rxjs'\nimport { DynamicService } from '../../core/services/dynamic.service'\nimport { PageDynamic } from '../../core/model/dynamic-page/dynamic-data-dto'\nimport { DynamicDirective } from '../../core/directives/dynamic.directive'\n\n@Component({\n  selector: 'w2m-page-dynamic',\n  template: `\n    <main id=\"content\">\n      <ng-template appDynamicHost></ng-template>\n    </main>\n    <app-top-button></app-top-button>\n  `,\n})\n\nexport class PageDynamicComponent implements OnInit, OnDestroy {\n  public fields: PageDynamic\n\n  unsubscribe$ = new Subject<void>()\n\n  CURRENT_URL: string\n\n  @ViewChild(DynamicDirective, { static: true }) dynamicHost: DynamicDirective\n\n  constructor(\n    private titleService: Title,\n    private dynamicService: DynamicService,\n    private cdref: ChangeDetectorRef,\n    private router: Router,\n    private magnoliaService: MagnoliaService,\n    private i18nService: I18nService,\n  ) {\n    this.changeLanguage()\n  }\n\n  ngOnInit(): void {\n    this.renderPage()\n  }\n\n  ngOnDestroy(): void {\n    this.unsubscribe$.next()\n    this.unsubscribe$.complete()\n  }\n\n  private renderPage(): void {\n    this.i18nService.init(this.router.url)\n    this.CURRENT_URL = this.i18nService.getURL(this.router.url)\n\n    this.magnoliaService.getPage(this.CURRENT_URL).subscribe((page: PageDynamic) => {\n      this.dynamicHost.viewContainerRef.clear()\n      const fields = page.data\n      const { title } = fields\n      this.titleService.setTitle(title)\n      this.renderComponents(fields)\n    })\n  }\n\n  private changeLanguage() {\n    this.i18nService.changeLanguage$\n      .pipe(\n        takeUntil(this.unsubscribe$),\n      ).subscribe(() => {\n        if (this.CURRENT_URL !== undefined) {\n          this.router.navigate([`${this.i18nService.currentLanguage}/${this.CURRENT_URL}`])\n        }\n      })\n  }\n\n  private renderComponents(fields: PageDynamic) {\n    const { content } = fields\n    this.dynamicService.processModules(content).subscribe(module => {\n      content.filter(data => this.dynamicService.hasModuleActive(data.typeSection))\n        .map((item, index) => this.dynamicService\n          .loadComponent(module[index], item.typeSection, item, this.dynamicHost))\n    })\n  }\n}\n"],"sourceRoot":"webpack:///"}